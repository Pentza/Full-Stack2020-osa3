{"version":3,"sources":["services/persons.js","components/PersonForm.js","components/Filter.js","components/Persons.js","components/Notification.js","components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","put","delete","PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","filter","handleFilterChange","Persons","persons","person","name","toLowerCase","startsWith","map","number","onClick","handleDelete","Notification","message","error","className","App","useState","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","setError","useEffect","personService","initialPersons","setErrMessage","setTimeout","updatePerson","find","p","changedPerson","returnedPerson","catch","err","event","target","preventDefault","length","window","confirm","concat","ReactDOM","render","document","getElementById"],"mappings":"gNACMA,EAAU,eAuBD,EApBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB9B,EAfA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa9B,EAVA,SAACG,EAAIF,GAEhB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ9B,EALA,SAACG,GAEZ,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,MAAK,kBAAM,MCFfQ,EAhBI,SAACC,GAChB,OACI,uBAAMC,SAAUD,EAAME,UAAtB,UACA,yCACQ,uBAAOC,MAAOH,EAAMI,QAASC,SAAUL,EAAMM,sBAErD,2CACY,uBAAOH,MAAOH,EAAMO,UAAWF,SAAUL,EAAMQ,wBAE3D,8BACE,wBAAQC,KAAK,SAAb,uBCHKC,EARA,SAACV,GACZ,OACI,sDACsB,uBAAOG,MAAOH,EAAMW,OAAQN,SAAUL,EAAMY,yBCgB3DC,EAnBC,SAACb,GAMb,OACI,6BACKA,EAAMc,QACFH,QARe,SAACI,GAAD,OACxBA,EAAOC,KAAKC,cAAcC,WACtBlB,EAAMW,OAAOM,kBAORE,KAAI,SAAAJ,GAAM,OACP,+BAAqBA,EAAOC,KAA5B,IAAmCD,EAAOK,OAA1C,IAAkD,wBAAQjB,MAAOY,EAAOnB,GAAIyB,QAASrB,EAAMsB,aAAzC,sBAAzCP,EAAOnB,UCWrB2B,EArBM,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAAUC,EAAW,EAAXA,MAC9B,OAAgB,OAAZD,EACO,KAGPC,EAEI,qBAAKC,UAAU,QAAf,SACKF,IAKL,qBAAKE,UAAU,eAAf,SACKF,KCsHFG,EA/HH,WAAO,IAAD,EACeC,mBAAS,IADxB,mBACRd,EADQ,KACCe,EADD,OAEgBD,mBAAS,IAFzB,mBAERxB,EAFQ,KAEC0B,EAFD,OAGoBF,mBAAS,IAH7B,mBAGRrB,EAHQ,KAGGwB,EAHH,OAIcH,mBAAS,IAJvB,mBAIRjB,EAJQ,KAIAqB,EAJA,OAK0BJ,mBAAS,MALnC,mBAKRK,EALQ,KAKMC,EALN,OAMYN,mBAAS,MANrB,mBAMRH,EANQ,KAMDU,EANC,KAQhBC,qBAAU,WACNC,IAEG9C,MAAK,SAAA+C,GACJT,EAAWS,QAEZ,IAEP,IAMMC,EAAgB,SAACf,EAASC,GAC9BU,EAASV,GACTS,EAAgBV,GAChBgB,YAAW,WACTN,EAAgB,QACf,MA0BCO,EAAe,WACnB,IAAM1B,EAASD,EAAQ4B,MAAK,SAAAC,GAAC,OAAIA,EAAE3B,OAASZ,KACtCwC,EAAa,2BAAQ7B,GAAR,IAAgBK,OAAQb,IAC3C8B,EACUtB,EAAOnB,GAAIgD,GAClBrD,MAAK,SAAAsD,GACJN,EAAc,GAAD,OAAIxB,EAAOC,KAAX,sBAAoC,GACjDa,EAAWf,EAAQK,KAAI,SAAAwB,GAAC,OAAIA,EAAE/C,KAAOmB,EAAOnB,GAAK+C,EAAIE,SAEtDC,OAAM,SAAAC,GACLR,EAAc,GAAD,OAAIxB,EAAOC,KAAX,yCAAuD,GACpEa,EAAWf,EAAQH,QAAO,SAAAgC,GAAC,OAAIA,EAAE/C,KAAOmB,EAAOnB,WAoCrD,OACE,gCACE,2CAEA,cAAC,EAAD,CAAc4B,QAASS,EAAcR,MAAOA,IAE5C,cAAC,EAAD,CAAQd,OAAQA,EAAQC,mBAZD,SAACoC,GACxBhB,EAAUgB,EAAMC,OAAO9C,UAavB,2CACA,cAAC,EAAD,CACED,UAhFY,SAAC8C,IACjBA,EAAME,iBAbFpC,EAAQH,QAAO,SAAAI,GAAM,OAAIA,EAAOC,OAASZ,KAAS+C,OAAS,IAe1CC,OAAOC,QAAP,UAAkBjD,EAAlB,8EACHqC,IACZX,EAAW,IACXC,EAAa,KAMbM,EAJqB,CACjBrB,KAAMZ,EACNgB,OAAQb,IAIThB,MAAK,SAAAsD,GACJhB,EAAWf,EAAQwC,OAAOT,IAC1Bf,EAAW,IACXC,EAAa,IACbQ,EAAc,GAAD,OAAInC,EAAJ,WAAqB,OA+DxCA,QAASA,EACTG,UAAWA,EACXD,iBA3BmB,SAAC0C,GACxBlB,EAAWkB,EAAMC,OAAO9C,QA2BpBK,mBAxBqB,SAACwC,GAC1BjB,EAAaiB,EAAMC,OAAO9C,UA0BxB,yCACE,cAAC,EAAD,CACEW,QAASA,EACTH,OAAQA,EACRW,aArDa,SAAC0B,GACpB,IAAII,OAAOC,UAaT,OAAO,KAZP,IAAMzD,EAAKoD,EAAMC,OAAO9C,MACxBkC,EACUzC,GACPL,MAAK,WACJ8C,IAEG9C,MAAK,SAAAuB,GACJyB,EAAc,kBAAkB,GAChCV,EAAWf,gB,MChFzByC,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.bdbf9291.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n//const baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n    const request = axios.post(baseUrl, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(() => true)\r\n}\r\n\r\nexport default { getAll, create, update, remove }\r\n","import React from 'react'\r\n\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.addPerson}>\r\n        <div>\r\n          name: <input value={props.newName} onChange={props.handleNameChange} />\r\n        </div>\r\n        <div>\r\n            number: <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <form>\r\n            filter shown with <input value={props.filter} onChange={props.handleFilterChange} />\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Persons = (props) => {\r\n    const caseSensitiveFilter = (person) => (\r\n        person.name.toLowerCase().startsWith(\r\n            props.filter.toLowerCase()\r\n        )\r\n    )\r\n    return (\r\n        <ul>\r\n            {props.persons\r\n                .filter(caseSensitiveFilter)\r\n                .map(person => (\r\n                    <li key={person.id}>{person.name} {person.number} <button value={person.id} onClick={props.handleDelete}>delete</button></li>\r\n                ))\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n\r\n\r\nexport default Persons","import React from 'react'\r\n\r\n\r\nconst Notification = ({ message , error}) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"error\">\r\n                {message}\r\n            </div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div className=\"confirmation\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Notification","import React, { useEffect, useState } from 'react'\r\nimport personService from '../services/persons'\r\n\r\nimport PersonForm from './PersonForm'\r\nimport Filter from './Filter'\r\nimport Persons from './Persons'\r\nimport Notification from './Notification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n  const [ error, setError ] = useState(null)\r\n\r\n  useEffect(() => {\r\n      personService\r\n        .getAll()\r\n        .then(initialPersons => {\r\n          setPersons(initialPersons)\r\n        })\r\n      }, [])\r\n\r\n  const personExists = () => {\r\n      return (\r\n        persons.filter(person => person.name === newName).length > 0\r\n      )\r\n  }\r\n\r\n  const setErrMessage = (message, error) => {\r\n    setError(error)\r\n    setErrorMessage(message)\r\n    setTimeout(() => {\r\n      setErrorMessage(null)\r\n    }, 3000)\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n      if (personExists()) {\r\n          const result = window.confirm(`${newName} is already added to phonebook, replace the old number with the new one?`)\r\n          if (result) updatePerson()\r\n          setNewName('')\r\n          setNewNumber('')\r\n      } else {\r\n          const personObject = {\r\n              name: newName,\r\n              number: newNumber\r\n          }\r\n          personService\r\n            .create(personObject)\r\n            .then(returnedPerson => {\r\n              setPersons(persons.concat(returnedPerson))\r\n              setNewName('')\r\n              setNewNumber('')\r\n              setErrMessage(`${newName} added`, false)\r\n          })\r\n    }\r\n  }\r\n  \r\n  const updatePerson = () => {\r\n    const person = persons.find(p => p.name === newName)\r\n    const changedPerson = { ...person, number: newNumber}\r\n    personService\r\n      .update(person.id, changedPerson)\r\n      .then(returnedPerson => {\r\n        setErrMessage(`${person.name} / number changed`, false)\r\n        setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\r\n      })\r\n      .catch(err => {\r\n        setErrMessage(`${person.name} was already removed from the server`, true)\r\n        setPersons(persons.filter(p => p.id !== person.id))\r\n      })\r\n  }\r\n\r\n  const deletePerson = (event) => {\r\n    if (window.confirm()) {\r\n      const id = event.target.value\r\n      personService\r\n        .remove(id)\r\n        .then(() => {\r\n          personService\r\n            .getAll()\r\n            .then(persons => {\r\n              setErrMessage(`person deleted`, false)\r\n              setPersons(persons)\r\n            })\r\n        })\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  \r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n      setFilter(event.target.value)\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notification message={errorMessage} error={error} />\r\n\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\r\n      \r\n      <h2>add a new</h2>\r\n      <PersonForm \r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n        <Persons \r\n          persons={persons}\r\n          filter={filter}\r\n          handleDelete={deletePerson}\r\n        />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App'\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}